-define(BASE_DIR, "/tmp/srv").

build_server() ->
    [
     #file{ type = dir,
            path = filename:join([?BASE_DIR, "build_dir"])
          },
     on([ {operating_system_name, darwin},
          {package_manager, brew} ],
        #package{ name = "git1" })

    ].


main() ->
    [
     load("base.htd"),
     on({host, "spawn.local"}, {role, build_server}),
     on({role, build_server}, build_server())
    ].
